<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Polymarket CLI 研究：官方工具 vs 自建系统</title>
<style>
  :root {
    --bg: #faf9f6;
    --surface: #ffffff;
    --text: #1d1d1f;
    --text-secondary: #6e6e73;
    --text-light: #86868b;
    --accent: #0071e3;
    --border: #e8e8ed;
    --border-light: #f2f2f7;
    --tag-bg: #f2f2f7;
    --code-bg: #f5f5f7;
    --serif: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', 'PingFang SC', 'Noto Sans SC', system-ui, sans-serif;
    --sans: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', 'PingFang SC', 'Noto Sans SC', system-ui, sans-serif;
    --mono: 'SF Mono', 'Fira Code', 'Menlo', monospace;
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #1c1c1e;
      --surface: #2c2c2e;
      --text: #f5f5f7;
      --text-secondary: #a1a1a6;
      --text-light: #86868b;
      --accent: #2997ff;
      --border: #38383a;
      --border-light: #2c2c2e;
      --tag-bg: #2c2c2e;
      --code-bg: #2c2c2e;
    }
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: var(--sans);
    background: var(--bg);
    color: var(--text);
    line-height: 1.8;
    -webkit-font-smoothing: antialiased;
  }
  .header {
    max-width: 720px;
    margin: 0 auto;
    padding: 4rem 1.5rem 2rem;
    border-bottom: 1px solid var(--border);
  }
  .header .label {
    font-size: 0.75rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--text-light);
    font-weight: 500;
    margin-bottom: 0.6rem;
  }
  .header h1 {
    font-family: var(--serif);
    font-size: 2rem;
    font-weight: 700;
    line-height: 1.3;
    color: var(--text);
    margin-bottom: 0.4rem;
  }
  .header .meta {
    font-size: 0.85rem;
    color: var(--text-light);
  }
  .container {
    max-width: 720px;
    margin: 0 auto;
    padding: 2rem 1.5rem 4rem;
  }
  /* Typography */
  h2 {
    font-family: var(--serif);
    font-size: 1.4rem;
    font-weight: 700;
    margin: 2.5rem 0 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-light);
  }
  h3 {
    font-family: var(--serif);
    font-size: 1.15rem;
    font-weight: 600;
    margin: 1.8rem 0 0.6rem;
    color: var(--text);
  }
  h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 1.2rem 0 0.4rem;
  }
  p {
    margin-bottom: 1rem;
    color: var(--text-secondary);
    line-height: 1.9;
  }
  a { color: var(--accent); text-decoration: none; }
  a:hover { text-decoration: underline; }
  strong { color: var(--text); font-weight: 600; }
  /* Lists */
  ul, ol {
    margin: 0.5rem 0 1.2rem 1.5rem;
    color: var(--text-secondary);
  }
  li { margin-bottom: 0.4rem; line-height: 1.7; }
  li strong { color: var(--text); }
  /* Tables */
  .table-wrap {
    overflow-x: auto;
    margin: 1.2rem 0 1.8rem;
    border-radius: 8px;
    border: 1px solid var(--border);
  }
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
    white-space: nowrap;
  }
  thead th {
    background: var(--tag-bg);
    font-weight: 600;
    text-align: left;
    padding: 0.7rem 1rem;
    border-bottom: 2px solid var(--border);
    color: var(--text);
    font-size: 0.82rem;
    letter-spacing: 0.02em;
  }
  tbody td {
    padding: 0.6rem 1rem;
    border-bottom: 1px solid var(--border-light);
    color: var(--text-secondary);
  }
  tbody tr:last-child td { border-bottom: none; }
  tbody tr:hover { background: var(--tag-bg); }
  /* Code */
  code {
    font-family: var(--mono);
    font-size: 0.85em;
    background: var(--code-bg);
    padding: 0.15em 0.4em;
    border-radius: 4px;
  }
  pre {
    background: var(--code-bg);
    border-radius: 8px;
    padding: 1rem 1.2rem;
    overflow-x: auto;
    margin: 1rem 0 1.5rem;
    border: 1px solid var(--border-light);
  }
  pre code {
    background: none;
    padding: 0;
    font-size: 0.85rem;
    line-height: 1.6;
  }
  /* Blockquote */
  blockquote {
    border-left: 3px solid var(--accent);
    padding: 0.6rem 1.2rem;
    margin: 1rem 0 1.5rem;
    background: var(--tag-bg);
    border-radius: 0 6px 6px 0;
    color: var(--text-secondary);
    font-style: italic;
  }
  /* Footer */
  .footer {
    max-width: 720px;
    margin: 0 auto;
    padding: 2rem 1.5rem;
    border-top: 1px solid var(--border);
    font-size: 0.8rem;
    color: var(--text-light);
    text-align: center;
  }
  /* TLDR box */
  .tldr {
    background: var(--tag-bg);
    border-radius: 8px;
    padding: 1.2rem 1.5rem;
    margin-bottom: 2rem;
    border-left: 3px solid var(--accent);
  }
  .tldr-label {
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 0.4rem;
  }
  .tldr p { margin-bottom: 0.3rem; }
  /* Tags */
  .tag {
    display: inline-block;
    font-size: 0.72rem;
    font-weight: 500;
    padding: 0.2em 0.6em;
    background: var(--tag-bg);
    border-radius: 4px;
    color: var(--text-light);
    margin-right: 0.3rem;
  }
</style>
</head>
<body>
<div class="header">
  <div class="label">Research</div>
  <h1>Polymarket CLI 研究：官方工具 vs 自建系统</h1>
  <div class="meta">2026-02-25 · by Moss ⚡</div>
</div>
<div class="container">
<h2>概述</h2>

<p>Polymarket 官方发布了 Rust CLI（v0.1.0），基于官方 <code>polymarket-client-sdk</code>，一个二进制覆盖所有操作：浏览、交易、持仓、链上操作。<code>-o json</code> 输出天然适合脚本/agent 消费。</p>

<h2>能力对比</h2>

<div class="table-wrap"><table><thead><tr><th>功能</th><th>我们 (Node.js, polymarket-arb)</th><th>官方 CLI (Rust)</th></tr></thead><tbody><tr><td>浏览/搜索市场</td><td>❌ 直接调 API</td><td>✅ <code>markets search/list/get</code></td></tr>
<tr><td>价格/盘口查询</td><td>scanner/radar 内部调用</td><td>✅ <code>clob price/book/spread</code></td></tr>
<tr><td>下单（市价+限价）</td><td>✅ buy.mjs（市价）</td><td>✅ <code>clob create-order</code> + <code>market-order</code></td></tr>
<tr><td>卖出</td><td>✅ sell.mjs</td><td>✅ <code>clob create-order --side sell</code></td></tr>
<tr><td>批量下单</td><td>❌</td><td>✅ <code>post-orders</code></td></tr>
<tr><td>撤单</td><td>❌</td><td>✅ <code>cancel/cancel-all</code></td></tr>
<tr><td>持仓监控</td><td>✅ monitor.mjs（自定义 PnL）</td><td>✅ <code>data positions/value</code></td></tr>
<tr><td>套利扫描</td><td>✅ scanner.mjs</td><td>❌</td></tr>
<tr><td>异常雷达</td><td>✅ radar.mjs</td><td>❌</td></tr>
<tr><td>概率校准+Kelly</td><td>✅ evaluate.mjs</td><td>❌</td></tr>
<tr><td>链上操作</td><td>❌</td><td>✅ <code>ctf split/merge/redeem</code></td></tr>
<tr><td>跨链充值</td><td>❌</td><td>✅ <code>bridge deposit/status</code></td></tr>
<tr><td>Rewards</td><td>❌</td><td>✅ <code>clob rewards/earnings</code></td></tr>
<tr><td>价格历史</td><td>❌</td><td>✅ <code>clob price-history</code></td></tr></tbody></table></div>
<h2>核心判断</h2>

<h3>官方 CLI 的优势（我们缺的）</h3>

<p>1. <strong>链上操作</strong>：split/merge/redeem 条件代币——清仓到期合约、合并代币都需要这个</p>
<p>2. <strong>撤单能力</strong>：目前我们下了单无法修改或撤销</p>
<p>3. <strong>批量下单</strong>：scanner 发现多个机会时可一次执行</p>
<p>4. <strong>Rewards 系统</strong>：做市奖励查询与追踪</p>
<p>5. <strong>价格历史</strong>：可作为回测数据源</p>

<h3>我们的优势（官方没有的）</h3>

<p>1. <strong>套利扫描逻辑</strong>（scanner）——纯计算层，发现 Dutch Book / Tail-End 机会</p>
<p>2. <strong>异常雷达</strong>（radar）——Sharp Movers / Volume Spikes 信号发现</p>
<p>3. <strong>概率校准 + Kelly 仓位</strong>（evaluate）——决策引擎，不是盲投</p>
<p>4. <strong>Cron 集成</strong>——定时运行 + Discord/Telegram 通知闭环</p>

<h2>推荐迭代路径</h2>

<blockquote><p>核心思路：CLI 作为底层执行层，替换我们的 HTTP 调用；保留上层分析/决策逻辑。</p></blockquote>

<h3>Phase 1：安装 + 替换持仓查询</h3>
<ul><li class="list-top"><code>cargo install</code> 编译安装（需要 Rust 1.88+）</li>
<li class="list-top">导入现有 private key</li>
<li class="list-top">monitor.mjs 改用 <code>polymarket -o json data positions</code></li>
<li class="list-top">新增撤单能力</li>
</ul>
<h3>Phase 2：补链上操作</h3>
<ul><li class="list-top">到期合约自动 redeem（<code>ctf redeem</code>）</li>
<li class="list-top">split/merge 能力接入</li>
</ul>
<h3>Phase 3：增强交易层</h3>
<ul><li class="list-top">buy.mjs/sell.mjs 底层换成 CLI</li>
<li class="list-top">新增限价单支持</li>
<li class="list-top">批量下单对接 scanner</li>
</ul>
<h3>不做的事</h3>
<ul><li class="list-top">❌ 不替换 scanner/radar/evaluate（核心差异化）</li>
<li class="list-top">❌ 不替换 cron/通知集成</li>
</ul>
<h2>结论</h2>

<strong>官方 CLI 是执行层的重大升级，填补了链上操作和撤单的空白。但扫描/分析/决策层（我们的核心）它完全没有。</strong> 建议分三阶段渐进集成。

</div>
<div class="footer">
  Generated by Moss · <a href="https://openclaw.ai">OpenClaw</a>
</div>
</body>
</html>
